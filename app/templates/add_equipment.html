<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Add Equipment</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/add_equip.css')}}">
    <style>
        /* Snackbar styling */
        #snackbar {
            visibility: hidden;
            min-width: 250px;
            margin-left: -125px;
            background-color: #333;
            color: #fff;
            text-align: center;
            border-radius: 2px;
            padding: 16px;
            position: fixed;
            z-index: 1;
            bottom: 30px;
            left: 50%;
            font-size: 17px;
        }

        #snackbar.show {
            visibility: visible;
            animation: fadein 0.5s, fadeout 0.5s 2.5s;
        }

        @keyframes fadein {
            from { bottom: 0; opacity: 0; }
            to { bottom: 30px; opacity: 1; }
        }

        @keyframes fadeout {
            from { bottom: 30px; opacity: 1; }
            to { bottom: 0; opacity: 0; }
        }
    </style>
</head>
<body>
    <div id="sidebar">
        <ul class="nav flex-column">
            <li class="nav-item">
                <a class="nav-link active" href="/index" title="Dashboard"><i class="fas fa-tachometer-alt"></i></a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="/inventory" title="Inventory"><i class="fas fa-box"></i></a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="/adicionar_equipamento" title="Add Equipment"><i class="fas fa-plus"></i></a>
            </li>
            
            <li class="nav-item">
                <a class="nav-link" href="#" title="Reports"><i class="fas fa-chart-line"></i></a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="#" title="Settings"><i class="fas fa-cog"></i></a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="/logout" title="Logout"><i class="fas fa-sign-out-alt"></i></a>
            </li>
        </ul>
    </div>

    <!-- Main content -->
    <div id="main-content">
        <h1>Adicionar Equipamento</h1>
        <form enctype="multipart/form-data" action="{{ url_for('add_equip') }}" method="post">
            <div class="form-group">
                <div class="form-check">
                    <input type="radio" class="form-check-input" name="entryMode" id="singleEntry" value="single" checked onclick="toggleEntryMode()">
                    <label class="form-check-label" for="singleEntry">Introdução unitaria</label>
                </div>
                <div class="form-check">
                    <input type="radio" class="form-check-input" name="entryMode" id="bulkEntry" value="bulk" onclick="toggleEntryMode()">
                    <label class="form-check-label" for="bulkEntry">Introdução em Bulk(CSV)</label>
                </div>
            </div>
        
            <!-- Single Entry Fields -->
            <div id="singleEntryFields">
                <div class="form-group">
                    <label for="itemSerialNo">Numero de série</label>
                    <input type="text" class="form-control" id="itemSerialNo" name="itemSerialNo" placeholder="Introduzir serial number">
                </div>
                <div class="form-group">
                    <label for="itemName">Tipo de equipamento</label>
                    <input type="text" class="form-control" id="itemName" name="itemName" placeholder="Introduzir tipo de equipamento">
                </div>
                <div class="form-group">
                    <label for="location">Escola</label>
                    <select class="form-control" id="location" name="location">
                        <option value="" disabled selected>Selecionar escola</option>
                        {% for escola in escolas %}
                            <option>{{ escola }}</option>
                        {% endfor %}
                    </select>
                </div>
                <div class="form-group">
                    <label for="assignedTo">Atribuido a (opcional)</label>
                    <input type="text" class="form-control" id="assignedTo" name="assignedTo" placeholder="Introduzir cc do aluno">
                </div>
            </div>
        
            <!-- Bulk Entry Fields -->
            <div id="bulkEntryFields" style="display: none;">
                <div class="form-group">
                    <label for="csvFile">Upload ficheiro CSV</label>
                    <input type="file" class="form-control-file" id="csvFile" name="csvFile" accept=".csv">
                </div>
            </div>
        
            <button type="submit" class="btn btn-primary">Adicionar equipamento</button>
        </form>
        
        <script>
            function toggleEntryMode() {
                const singleEntryFields = document.getElementById("singleEntryFields");
                const bulkEntryFields = document.getElementById("bulkEntryFields");
                const isBulk = document.getElementById("bulkEntry").checked;
        
                singleEntryFields.style.display = isBulk ? "none" : "block";
                bulkEntryFields.style.display = isBulk ? "block" : "none";
            }
        </script>
</body>
</html>